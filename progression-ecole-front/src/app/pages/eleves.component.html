<div class="container">
  <h2>Liste des Ã©lÃ¨ves</h2>
  @if (error()) {
    <div class="error">{{ error() }}</div>
  }
  <div class="eleves-list" 
       cdkDropList 
       (cdkDropListDropped)="onDropEleves($event)">
    @for (eleve of eleves(); track eleve.id) {
      <div class="eleve-item" 
           [class.editing]="selected()?.id === eleve.id"
           cdkDrag 
           [cdkDragDisabled]="selected()?.id === eleve.id">
        @if (selected() && selected()?.id === eleve.id) {
          <div class="edit-form">
            <input [formControl]="editPrenom" placeholder="PrÃ©nom" required />
            <select [formControl]="editClasse" required>
              <option value="Petit">Petit</option>
              <option value="Moyen">Moyen</option>
              <option value="Grand">Grand</option>
            </select>
            <div class="actions">
              <button class="action-btn btn-save" (click)="save()">Enregistrer</button>
              <button class="action-btn btn-cancel" (click)="cancel()">Annuler</button>
            </div>
          </div>
        } @else {
          <div class="eleve-info">
            <div class="drag-handle" cdkDragHandle title="Glisser pour rÃ©organiser l'Ã©lÃ¨ve">â‹®â‹®</div>
            <span class="eleve-icon">ðŸ‘¤</span>
            <span class="eleve-prenom">{{ eleve.prenom }}</span>
            <span class="eleve-classe classe-{{ (eleve.classe || 'Petit').toLowerCase() }}">{{ eleve.classe || 'Petit' }}</span>
            <div class="actions">
              <button class="action-btn btn-edit" (click)="select(eleve)">Modifier</button>
              <button class="action-btn btn-delete" (click)="deleteEleve(eleve.id)">Supprimer</button>
            </div>
          </div>
        }
      </div>
    }
  </div>

  <h3>Ajouter un Ã©lÃ¨ve</h3>
  <div class="add-form">
    <input [formControl]="addPrenom" placeholder="PrÃ©nom" required (keydown.enter)="add()" />
    <select [formControl]="addClasse" required>
      <option value="" disabled selected>Choisir une classe</option>
      <option value="Petit">Petit</option>
      <option value="Moyen">Moyen</option>
      <option value="Grand">Grand</option>
    </select>
    <button type="button" (click)="add()">Ajouter</button>
  </div>

  <!-- Le formulaire de modification est maintenant affichÃ© dans la ligne du tableau -->
</div>
